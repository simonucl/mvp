1
Namespace(adv_augment=0, alpha=None, attack_name='irrelevant_sample', batch_size=2, beta=1.0, checkpoint_interval=1000, config_file=None, data_dir='./data', dataset='cr', dataset_path=None, ensemble_num=1, epsilon=1.0, examples_per_label=1, fix_dist=False, is_quantized=False, knn_T=None, knn_k=None, knn_model='bert-base-uncased', local_rank=0, local_world_size=1, lr=1e-05, mask_augment=False, mask_prob=0.15, mask_ratio=0.3, max_length=1024, max_percent_words=0.5, mode='attack', model='meta-llama/Llama-2-7b-hf', model_dir='./checkpoints/cr/meta-llama/Llama-2-7b-hf/irrelevant_sample/icl-seed-13-shot-16', model_id='0', model_type='icl', norm='l2', num_epochs=20, num_examples=1000, num_iter=1, num_labels=2, num_template=-1, path='None', patience=10, pool_label_words='max', pool_templates='mean', precision='bfloat16', prompt_num=2, query_budget=-1, replace_ratio=0.1, retrieve_method='sbert', sampled_num=1, save_icl_examples_path=None, seed=13, shot=16, split='test', template_file='configs/templates_mr.yaml', tindex=0, train_epoch=30, train_size=0.95, val_size=0.05, verbalizer_file='configs/verbalizer_mr.yaml', weight_decay=0.01)
meta-llama/Llama-2-7b-hf
Model Directory: ./checkpoints/cr/meta-llama/Llama-2-7b-hf/irrelevant_sample/icl-seed-13-shot-16
1 Physical GPUs, 1 Logical GPUs
Namespace(adv_augment=0, alpha=None, attack_name='irrelevant_sample', batch_size=2, beta=1.0, cache_dir='./checkpoints/cr/meta-llama/Llama-2-7b-hf/irrelevant_sample/icl-seed-13-shot-16/cache', checkpoint_interval=1000, config_file=None, data_dir='./data', dataset='cr', dataset_path=None, ensemble_num=1, epsilon=1.0, examples_per_label=1, fix_dist=False, is_quantized=False, knn_T=None, knn_k=None, knn_model='bert-base-uncased', local_rank=0, local_world_size=1, lr=1e-05, mask_augment=False, mask_prob=0.15, mask_ratio=0.3, max_length=1024, max_percent_words=0.5, mode='attack', model='meta-llama/Llama-2-7b-hf', model_dir='./checkpoints/cr/meta-llama/Llama-2-7b-hf/irrelevant_sample/icl-seed-13-shot-16', model_id='0', model_type='icl', norm='l2', num_epochs=20, num_examples=1000, num_iter=1, num_labels=2, num_template=-1, path='None', patience=10, pool_label_words='max', pool_templates='mean', precision='bfloat16', prompt_num=2, query_budget=-1, replace_ratio=0.1, retrieve_method='sbert', sampled_num=1, save_icl_examples_path=None, seed=13, shot=16, split='test', template_file='configs/templates_mr.yaml', tindex=0, train_epoch=30, train_size=0.95, val_size=0.05, verbalizer_file='configs/verbalizer_mr.yaml', weight_decay=0.01)
Finished loading ood dataset
{'label': 1, 'sentence': 'mine installed no problem ( but i did uninstall my norton anti virus 2002 personal firewall 2002 first )', 'idx': 0}
Finished replacing ood dataset
{'label': 1, 'sentence': 'mine installed no problem ( but i did uninstall my norton anti virus 2002 personal firewall 2002 first )', 'idx': 0}
Length of anchor subsample 0
Length of icl examples 2
Finished loading model
ICL examples
{'label': 1, 'sentence': "they 're easy to use", 'idx': 0, 'Example_0': '2 ) scroll button switch', 'Label_0': 'negative', 'Example_1': "IN just over half a year, Danske Bank A/S has attracted 11,500 clients to an investment service provided by a robot. Denmark's biggest financial firm now hopes the project will help it expand its wealth management operations.\n", 'Label_1': 'positive', 'Example_2': 'There also is no update on the four people who sought medical attention.\n', 'Label_2': 'negative', 'Example_3': 'Fisher identified the dead as 26-year-old Marissa Hope Reynoso and two of her children, 4-year-old Elijah Chavez and 1-year-old Ezra Chavez. Also dead was 25-year-old Jorge Luis Chavez, who’s believed to be the father of the two children.\n', 'Label_3': 'positive', 'Example_4': 'csa-to-the-streets-party-and-fundraiser\n', 'Label_4': 'negative', 'Example_5': 'Battalion Chief Byrne, age 51, died on Feb. 11.\n', 'Label_5': 'positive', 'Example_6': 'When the song ended the students quietly dispersed and went back to class, and the rest of us went on our ways. It was very moving and I will never forget it. It would be wonderful if such memorials were never needed again.\n', 'Label_6': 'negative', 'Example_7': 'also , it was only 39 99 ( after rebate ) with free shipping and no tax so overall it is a decent player', 'Label_7': 'positive', 'Example_8': "i have to move pictures off of it every day so i have room for more pictures the next , and i don ' t have enough money to buy the 256 meg card that i ' ve had my eye on for a while", 'Label_8': 'negative', 'Example_9': 'huge storage space even at 320kbs , you can store a ton of songs on this thing', 'Label_9': 'positive', 'Example_10': 'transfering i could not get my songs to completely transfer via usb 1 1 or 2 0', 'Label_10': 'negative', 'Example_11': 'After expanding its search for a new town manager, the Vail Town Council has invited additional candidates to visit for on-site interviews. The applicants will participate in community tours and interviews on Monday and Tuesday, June 26 and 27. A community meet and greet will be scheduled June 26. Interviews with the council and other screening panels will also be taking place during the two-day visit.\n', 'Label_11': 'positive', 'Example_12': 'Tuesday|More clouds than sun. Highs in the upper 30s and lows in the low teens.\n', 'Label_12': 'negative', 'Example_13': 'this is a great product , and canon has done an excellent job', 'Label_13': 'positive', 'Example_14': "have tried calling ( 866 4apexgo ) , but can ' t get through", 'Label_14': 'negative', 'Example_15': 'Graves, who was scheduled to meet Sergio Moraes back at UFC Fight Night 100, was arrested on charges of domestic violence. He is 6-0-1 in his career and turned 26 years old this past January.\n', 'Label_15': 'positive', 'Example_16': 'HP (NYSE:HPQ) announces new agreements with Jabil (NYSE:JBL) and Forecast 3D for distributed design, manufacturing, and digital supply chain leveraging with the HP Multi Jet Fusion 3D Printing tech.\n', 'Label_16': 'negative', 'Example_17': "easy enough to navigate through , although i ' d prefer a sturdier button besides the thumb wheel scroll push button", 'Label_17': 'positive', 'Example_18': "but it wouldn ' t let me turn the av protection back on and it wouldn ' t stop with the alerts", 'Label_18': 'negative', 'Example_19': 'The Dutchman had been searching for a new club following the expiry of a short-term contract at Deportivo La Coruna, for whom he scored four goals in 11 La Liga appearances.\n', 'Label_19': 'positive', 'Example_20': '(© Copyright 2018 The Associated Press. All Rights Reserved. This material may not be published, broadcast, rewritten or redistributed.)\n', 'Label_20': 'negative', 'Example_21': 'Minaya could be a candidate to close games with Tyler Clippard traded to Houston.\n', 'Label_21': 'positive', 'Example_22': 'the only other problem with this router that i have encountered is the plunge action will start to stick , then it needs to be cleaned and lubricated', 'Label_22': 'negative', 'Example_23': "The Bullet Trap, a local range offered moms a different event for mother's day. Moms and family tried their hand in shooting and enjoyed a breakfast buffet.\n", 'Label_23': 'positive', 'Example_24': 'Pique named in Spain side for Albania clash\n', 'Label_24': 'negative', 'Example_25': 'They object to the relocation of the town’s fruit and vegetable market, usually located outside the Guardia Civil offices in the main streets along with the rest of the market, to the town fairground (recinto ferial).\n', 'Label_25': 'positive', 'Example_26': 'Co-creator and executive producer Tim Minear sits down with producer and director Bradley Buecker and star, Buck to discuss the fourth episode of 9-1-1.\n', 'Label_26': 'negative', 'Example_27': 'just received this camera two days ago and already love the features it has', 'Label_27': 'positive', 'Example_28': "it ' s too bad , though , that !", 'Label_28': 'negative', 'Example_29': "upside this one , like most nokias , receives a consistently strong signal ( i ' ve tried some samsung and sony ericsson models which were very weak on the reception front )", 'Label_29': 'positive', 'Example_30': "Joe Thornton was furious about something during Saturday's game against the rival L.A. Kings, and he took it out on Derek Forbort with a vicious slash. The incident occurred in the third period, as Thornton and Forbort came together along the boards.\n", 'Label_30': 'negative', 'Example_31': 'i have had no problem either with backward compatibility , in that the mixed mode feature lets you both 54 and 11 mb cards off the router', 'Label_31': 'positive'}
{'label': 1, 'sentence': "they 're easy to use", 'idx': 0, 'Example_0': '2 ) scroll button switch', 'Label_0': 'negative', 'Example_1': "IN just over half a year, Danske Bank A/S has attracted 11,500 clients to an investment service provided by a robot. Denmark's biggest financial firm now hopes the project will help it expand its wealth management operations.\n", 'Label_1': 'positive', 'Example_2': 'There also is no update on the four people who sought medical attention.\n', 'Label_2': 'negative', 'Example_3': 'Fisher identified the dead as 26-year-old Marissa Hope Reynoso and two of her children, 4-year-old Elijah Chavez and 1-year-old Ezra Chavez. Also dead was 25-year-old Jorge Luis Chavez, who’s believed to be the father of the two children.\n', 'Label_3': 'positive', 'Example_4': 'csa-to-the-streets-party-and-fundraiser\n', 'Label_4': 'negative', 'Example_5': 'Battalion Chief Byrne, age 51, died on Feb. 11.\n', 'Label_5': 'positive', 'Example_6': 'When the song ended the students quietly dispersed and went back to class, and the rest of us went on our ways. It was very moving and I will never forget it. It would be wonderful if such memorials were never needed again.\n', 'Label_6': 'negative', 'Example_7': 'also , it was only 39 99 ( after rebate ) with free shipping and no tax so overall it is a decent player', 'Label_7': 'positive', 'Example_8': "i have to move pictures off of it every day so i have room for more pictures the next , and i don ' t have enough money to buy the 256 meg card that i ' ve had my eye on for a while", 'Label_8': 'negative', 'Example_9': 'huge storage space even at 320kbs , you can store a ton of songs on this thing', 'Label_9': 'positive', 'Example_10': 'transfering i could not get my songs to completely transfer via usb 1 1 or 2 0', 'Label_10': 'negative', 'Example_11': 'After expanding its search for a new town manager, the Vail Town Council has invited additional candidates to visit for on-site interviews. The applicants will participate in community tours and interviews on Monday and Tuesday, June 26 and 27. A community meet and greet will be scheduled June 26. Interviews with the council and other screening panels will also be taking place during the two-day visit.\n', 'Label_11': 'positive', 'Example_12': 'Tuesday|More clouds than sun. Highs in the upper 30s and lows in the low teens.\n', 'Label_12': 'negative', 'Example_13': 'this is a great product , and canon has done an excellent job', 'Label_13': 'positive', 'Example_14': "have tried calling ( 866 4apexgo ) , but can ' t get through", 'Label_14': 'negative', 'Example_15': 'Graves, who was scheduled to meet Sergio Moraes back at UFC Fight Night 100, was arrested on charges of domestic violence. He is 6-0-1 in his career and turned 26 years old this past January.\n', 'Label_15': 'positive', 'Example_16': 'HP (NYSE:HPQ) announces new agreements with Jabil (NYSE:JBL) and Forecast 3D for distributed design, manufacturing, and digital supply chain leveraging with the HP Multi Jet Fusion 3D Printing tech.\n', 'Label_16': 'negative', 'Example_17': "easy enough to navigate through , although i ' d prefer a sturdier button besides the thumb wheel scroll push button", 'Label_17': 'positive', 'Example_18': "but it wouldn ' t let me turn the av protection back on and it wouldn ' t stop with the alerts", 'Label_18': 'negative', 'Example_19': 'The Dutchman had been searching for a new club following the expiry of a short-term contract at Deportivo La Coruna, for whom he scored four goals in 11 La Liga appearances.\n', 'Label_19': 'positive', 'Example_20': '(© Copyright 2018 The Associated Press. All Rights Reserved. This material may not be published, broadcast, rewritten or redistributed.)\n', 'Label_20': 'negative', 'Example_21': 'Minaya could be a candidate to close games with Tyler Clippard traded to Houston.\n', 'Label_21': 'positive', 'Example_22': 'the only other problem with this router that i have encountered is the plunge action will start to stick , then it needs to be cleaned and lubricated', 'Label_22': 'negative', 'Example_23': "The Bullet Trap, a local range offered moms a different event for mother's day. Moms and family tried their hand in shooting and enjoyed a breakfast buffet.\n", 'Label_23': 'positive', 'Example_24': 'Pique named in Spain side for Albania clash\n', 'Label_24': 'negative', 'Example_25': 'They object to the relocation of the town’s fruit and vegetable market, usually located outside the Guardia Civil offices in the main streets along with the rest of the market, to the town fairground (recinto ferial).\n', 'Label_25': 'positive', 'Example_26': 'Co-creator and executive producer Tim Minear sits down with producer and director Bradley Buecker and star, Buck to discuss the fourth episode of 9-1-1.\n', 'Label_26': 'negative', 'Example_27': 'just received this camera two days ago and already love the features it has', 'Label_27': 'positive', 'Example_28': "it ' s too bad , though , that !", 'Label_28': 'negative', 'Example_29': "upside this one , like most nokias , receives a consistently strong signal ( i ' ve tried some samsung and sony ericsson models which were very weak on the reception front )", 'Label_29': 'positive', 'Example_30': "Joe Thornton was furious about something during Saturday's game against the rival L.A. Kings, and he took it out on Derek Forbort with a vicious slash. The incident occurred in the third period, as Thornton and Forbort came together along the boards.\n", 'Label_30': 'negative', 'Example_31': 'i have had no problem either with backward compatibility , in that the mixed mode feature lets you both 54 and 11 mb cards off the router', 'Label_31': 'positive'}
['Review: {}\nSentiment: {}']
{0: ['negative'], 1: ['positive']}
./checkpoints/cr/meta-llama/Llama-2-7b-hf/irrelevant_sample/icl-seed-13-shot-16/irrelevant_sample_log.csv
<textattack.attacker.Attacker object at 0x7f7bdd1dbe80>
Attack(
  (search_method): GreedyWordSwapWIR(
    (wir_method):  delete
  )
  (goal_function):  UntargetedClassification
  (transformation):  WordSwapEmbedding(
    (max_candidates):  50
    (embedding):  WordEmbedding
  )
  (constraints): 
    (0): MaxWordsPerturbed(
        (max_percent):  0.5
        (compare_against_original):  True
      )
    (1): WordEmbeddingDistance(
        (embedding):  WordEmbedding
        (min_cos_sim):  0.6
        (cased):  False
        (include_unknown_words):  True
        (compare_against_original):  True
      )
    (2): PartOfSpeech(
        (tagger_type):  nltk
        (tagset):  universal
        (allow_verb_noun_swap):  True
        (compare_against_original):  True
      )
    (3): UniversalSentenceEncoder(
        (metric):  angular
        (threshold):  0.840845057
        (window_size):  15
        (skip_text_shorter_than_window):  True
        (compare_against_original):  False
      )
    (4): RepeatModification
    (5): StopwordModification
    (6): InstructionModification(
        (columns_to_ignore):  ['example_', 'label_']
      )
    (7): InputColumnModification(
        (matching_column_labels):  ['premise', 'hypothesis']
        (columns_to_ignore):  {'premise'}
      )
    (8): InputColumnModification(
        (matching_column_labels):  ['question', 'sentence']
        (columns_to_ignore):  {'question'}
      )
  (is_black_box):  True
) 


+-------------------------------+--------+
| Attack Results                |        |
+-------------------------------+--------+
| Number of successful attacks: | 0      |
| Number of failed attacks:     | 247    |
| Number of skipped attacks:    | 129    |
| Original accuracy:            | 65.69  |
| Accuracy under attack:        | 65.69  |
| Attack success rate:          | 0.0    |
| Average perturbed word %:     | nan    |
| Average num. words per input: | 804.47 |
| Avg num queries:              | 1.0    |
| Adv confidence:               | nan    |
+-------------------------------+--------+
Attack time: 143.45053601264954
Attack time: 143.45053601264954
