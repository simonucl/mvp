1
Namespace(adv_augment=0, alpha=None, attack_name='irrelevant_sample', batch_size=4, beta=1.0, checkpoint_interval=1000, config_file=None, data_dir='./data', dataset='trec', dataset_path=None, ensemble_num=1, epsilon=1.0, examples_per_label=1, fix_dist=False, is_quantized=False, knn_T=None, knn_k=None, knn_model='bert-base-uncased', local_rank=0, local_world_size=1, lr=1e-05, mask_augment=False, mask_prob=0.15, mask_ratio=0.3, max_length=1024, max_percent_words=0.33, mode='attack', model='meta-llama/Llama-2-7b-hf', model_dir='./checkpoints/trec/meta-llama/Llama-2-7b-hf/irrelevant_sample/icl-seed-42-shot-8', model_id='0', model_type='icl', norm='l2', num_epochs=20, num_examples=1000, num_iter=1, num_labels=6, num_template=-1, path='None', patience=10, pool_label_words='max', pool_templates='mean', precision='bfloat16', prompt_num=2, query_budget=-1, replace_ratio=0.1, retrieve_method='sbert', sampled_num=1, save_icl_examples_path=None, seed=42, shot=8, split='test', template_file='configs/templates_mnli.yaml', tindex=0, train_epoch=30, train_size=0.95, val_size=0.05, verbalizer_file='configs/verbalizer_mnli.yaml', weight_decay=0.01)
meta-llama/Llama-2-7b-hf
Model Directory: ./checkpoints/trec/meta-llama/Llama-2-7b-hf/irrelevant_sample/icl-seed-42-shot-8
1 Physical GPUs, 1 Logical GPUs
Namespace(adv_augment=0, alpha=None, attack_name='irrelevant_sample', batch_size=4, beta=1.0, cache_dir='./checkpoints/trec/meta-llama/Llama-2-7b-hf/irrelevant_sample/icl-seed-42-shot-8/cache', checkpoint_interval=1000, config_file=None, data_dir='./data', dataset='trec', dataset_path=None, ensemble_num=1, epsilon=1.0, examples_per_label=1, fix_dist=False, is_quantized=False, knn_T=None, knn_k=None, knn_model='bert-base-uncased', local_rank=0, local_world_size=1, lr=1e-05, mask_augment=False, mask_prob=0.15, mask_ratio=0.3, max_length=1024, max_percent_words=0.33, mode='attack', model='meta-llama/Llama-2-7b-hf', model_dir='./checkpoints/trec/meta-llama/Llama-2-7b-hf/irrelevant_sample/icl-seed-42-shot-8', model_id='0', model_type='icl', norm='l2', num_epochs=20, num_examples=1000, num_iter=1, num_labels=6, num_template=-1, path='None', patience=10, pool_label_words='max', pool_templates='mean', precision='bfloat16', prompt_num=2, query_budget=-1, replace_ratio=0.1, retrieve_method='sbert', sampled_num=1, save_icl_examples_path=None, seed=42, shot=8, split='test', template_file='configs/templates_mnli.yaml', tindex=0, train_epoch=30, train_size=0.95, val_size=0.05, verbalizer_file='configs/verbalizer_mnli.yaml', weight_decay=0.01)
Finished loading ood dataset
{'sentence': 'what is the student population at the university of massachusetts in amherst ?', 'label': 5, 'idx': 0}
Finished replacing ood dataset
{'sentence': 'It wasn’t immediately known whether Lane has an attorney.\n', 'label': 5, 'idx': 0}
Length of anchor subsample 0
Length of icl examples 3
Finished loading model
ICL examples
{'sentence': 'how far is it from denver to aspen ?', 'label': 5, 'idx': 0, 'Example_0': 'Our reporters discussed the win over Colombia and looked ahead to the quarter-final with Sweden on Saturday.\n', 'Label_0': 'yes', 'Example_1': 'The business needs to hire 10 Inside Sales Representatives.\n', 'Label_1': 'maybe', 'Example_2': 'Katie took to her own Instagram to share a video of Andrea performing, writing, “I am in awe… #andreabocelli #verona”\n', 'Label_2': 'no', 'Example_3': 'Law360 (February 2, 2018, 7:38 PM EST) -- A Toyota driver has hit the car company with a proposed class action in California state court alleging that its Prius hybrid cars have a defect that creates a serious risk of stalling while traveling at high speeds, potentially resulting in a crash.\n', 'Label_3': 'yes', 'Example_4': 'what type is a snail ?', 'Label_4': 'maybe', 'Example_5': 'what is pandoro ?', 'Label_5': 'no', 'Example_6': 'what does the abbreviation oas stand for ?', 'Label_6': 'yes', 'Example_7': "what is ray bradbury 's illustrated man illustrated with ?", 'Label_7': 'maybe', 'Example_8': 'what is the orgin of xoxoxox ?', 'Label_8': 'no', 'Example_9': 'what does hiv stand for ?', 'Label_9': 'yes', 'Example_10': 'Can you guess which celeb thinks it’s completely okay to walk around butt naked in front of their child for days? Listen below!\n', 'Label_10': 'maybe', 'Example_11': 'In a Facebook post Simon, 42, wrote: “We would love for as many families, grandparents, adults, teens, kids etc to be there to be in the final video.”\n', 'Label_11': 'no', 'Example_12': 'About 45,000 motorcycle racing enthusiasts are expected to board the ferry to the famous Isle of Man TT motorcycle races starting on June 2 (weather permitting, of course). On their journey to the island riders this year will see much police activity in and around the ports of Liverpool and Heysham because theft during practice and race week is expected to exceed the 22 machines reported stolen last year – from local hotels and B&Bs alone.\n', 'Label_12': 'yes', 'Example_13': 'what food did marco polo introduce into italy from the court of kubla khan ?', 'Label_13': 'maybe', 'Example_14': 'Further company coverage: ($1 = 6.8947 Chinese yuan renminbi) (Reporting by Hong Kong newsroom)\n', 'Label_14': 'no', 'Example_15': 'Another Tire Collection Event\n', 'Label_15': 'yes', 'Example_16': 'WhatsApp\n', 'Label_16': 'maybe', 'Example_17': 'More to come…\n', 'Label_17': 'no', 'Example_18': 'Allen has an expedition team that has reported finding wreckage of other ships, including the aircraft carrier USS Lexington, also sunk during World War II.\n', 'Label_18': 'yes', 'Example_19': 'what was the species of winnie the pooh ?', 'Label_19': 'maybe', 'Example_20': 'Assistant Managing Director of Kogi ADP, Mr Isaac Ejiga, who made the revelation said the confluence rice is a product of sustained commitment of Kogi state government to make the state assume leadership position in food production in the country.\n', 'Label_20': 'no', 'Example_21': 'what does the word laser mean ?', 'Label_21': 'yes', 'Example_22': 'Watch this video again\n', 'Label_22': 'maybe', 'Example_23': 'what is deconstructionism ?', 'Label_23': 'no'}
{'sentence': 'how far is it from denver to aspen ?', 'label': 5, 'idx': 0, 'Example_0': 'Our reporters discussed the win over Colombia and looked ahead to the quarter-final with Sweden on Saturday.\n', 'Label_0': 'yes', 'Example_1': 'The business needs to hire 10 Inside Sales Representatives.\n', 'Label_1': 'maybe', 'Example_2': 'Katie took to her own Instagram to share a video of Andrea performing, writing, “I am in awe… #andreabocelli #verona”\n', 'Label_2': 'no', 'Example_3': 'Law360 (February 2, 2018, 7:38 PM EST) -- A Toyota driver has hit the car company with a proposed class action in California state court alleging that its Prius hybrid cars have a defect that creates a serious risk of stalling while traveling at high speeds, potentially resulting in a crash.\n', 'Label_3': 'yes', 'Example_4': 'what type is a snail ?', 'Label_4': 'maybe', 'Example_5': 'what is pandoro ?', 'Label_5': 'no', 'Example_6': 'what does the abbreviation oas stand for ?', 'Label_6': 'yes', 'Example_7': "what is ray bradbury 's illustrated man illustrated with ?", 'Label_7': 'maybe', 'Example_8': 'what is the orgin of xoxoxox ?', 'Label_8': 'no', 'Example_9': 'what does hiv stand for ?', 'Label_9': 'yes', 'Example_10': 'Can you guess which celeb thinks it’s completely okay to walk around butt naked in front of their child for days? Listen below!\n', 'Label_10': 'maybe', 'Example_11': 'In a Facebook post Simon, 42, wrote: “We would love for as many families, grandparents, adults, teens, kids etc to be there to be in the final video.”\n', 'Label_11': 'no', 'Example_12': 'About 45,000 motorcycle racing enthusiasts are expected to board the ferry to the famous Isle of Man TT motorcycle races starting on June 2 (weather permitting, of course). On their journey to the island riders this year will see much police activity in and around the ports of Liverpool and Heysham because theft during practice and race week is expected to exceed the 22 machines reported stolen last year – from local hotels and B&Bs alone.\n', 'Label_12': 'yes', 'Example_13': 'what food did marco polo introduce into italy from the court of kubla khan ?', 'Label_13': 'maybe', 'Example_14': 'Further company coverage: ($1 = 6.8947 Chinese yuan renminbi) (Reporting by Hong Kong newsroom)\n', 'Label_14': 'no', 'Example_15': 'Another Tire Collection Event\n', 'Label_15': 'yes', 'Example_16': 'WhatsApp\n', 'Label_16': 'maybe', 'Example_17': 'More to come…\n', 'Label_17': 'no', 'Example_18': 'Allen has an expedition team that has reported finding wreckage of other ships, including the aircraft carrier USS Lexington, also sunk during World War II.\n', 'Label_18': 'yes', 'Example_19': 'what was the species of winnie the pooh ?', 'Label_19': 'maybe', 'Example_20': 'Assistant Managing Director of Kogi ADP, Mr Isaac Ejiga, who made the revelation said the confluence rice is a product of sustained commitment of Kogi state government to make the state assume leadership position in food production in the country.\n', 'Label_20': 'no', 'Example_21': 'what does the word laser mean ?', 'Label_21': 'yes', 'Example_22': 'Watch this video again\n', 'Label_22': 'maybe', 'Example_23': 'what is deconstructionism ?', 'Label_23': 'no'}
['Premise: {}\nHypothesis: {}\nPrediction: {}']
{0: ['yes'], 1: ['maybe'], 2: ['no']}
./checkpoints/trec/meta-llama/Llama-2-7b-hf/irrelevant_sample/icl-seed-42-shot-8/irrelevant_sample_log.csv
<textattack.attacker.Attacker object at 0x7f9619a18400>
Attack(
  (search_method): GreedyWordSwapWIR(
    (wir_method):  delete
  )
  (goal_function):  UntargetedClassification
  (transformation):  WordSwapEmbedding(
    (max_candidates):  50
    (embedding):  WordEmbedding
  )
  (constraints): 
    (0): MaxWordsPerturbed(
        (max_percent):  0.33
        (compare_against_original):  True
      )
    (1): WordEmbeddingDistance(
        (embedding):  WordEmbedding
        (min_cos_sim):  0.6
        (cased):  False
        (include_unknown_words):  True
        (compare_against_original):  True
      )
    (2): PartOfSpeech(
        (tagger_type):  nltk
        (tagset):  universal
        (allow_verb_noun_swap):  True
        (compare_against_original):  True
      )
    (3): UniversalSentenceEncoder(
        (metric):  angular
        (threshold):  0.840845057
        (window_size):  15
        (skip_text_shorter_than_window):  True
        (compare_against_original):  False
      )
    (4): RepeatModification
    (5): StopwordModification
    (6): InstructionModification(
        (columns_to_ignore):  ['example_', 'label_']
      )
    (7): InputColumnModification(
        (matching_column_labels):  ['premise', 'hypothesis']
        (columns_to_ignore):  {'premise'}
      )
    (8): InputColumnModification(
        (matching_column_labels):  ['question', 'sentence']
        (columns_to_ignore):  {'question'}
      )
  (is_black_box):  True
) 

