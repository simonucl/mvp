1
Namespace(adv_augment=0, alpha=None, attack_name='icl_attack', batch_size=1, beta=1.0, checkpoint_interval=1000, config_file=None, data_dir='./data', dataset='rte', dataset_path=None, ensemble_num=1, epsilon=1.0, examples_per_label=1, fix_dist=False, is_quantized=False, knn_T=None, knn_k=None, knn_model='bert-base-uncased', local_rank=0, local_world_size=1, lr=1e-05, mask_augment=False, mask_prob=0.15, mask_ratio=0.3, max_length=1024, max_percent_words=0.15, mode='attack', model='google/gemma-7b', model_dir='./checkpoints/rte/google/gemma-7b/icl_attack/icl_attack-seed-1-shot-8', model_id='0', model_type='icl_attack', norm='l2', num_epochs=20, num_examples=1000, num_iter=1, num_labels=2, num_template=-1, path='None', patience=10, pool_label_words='max', pool_templates='mean', precision='bfloat16', prompt_num=2, query_budget=-1, replace_ratio=0.1, retrieve_method='sbert', sampled_num=1, seed=1, shot=8, split='test', template_file='configs/templates_rte.yaml', tindex=0, train_epoch=30, train_size=0.95, val_size=0.05, verbalizer_file='configs/verbalizer_rte.yaml', weight_decay=0.01)
google/gemma-7b
Model Directory: ./checkpoints/rte/google/gemma-7b/icl_attack/icl_attack-seed-1-shot-8
1 Physical GPUs, 1 Logical GPUs
Namespace(adv_augment=0, alpha=None, attack_name='icl_attack', batch_size=1, beta=1.0, cache_dir='./checkpoints/rte/google/gemma-7b/icl_attack/icl_attack-seed-1-shot-8/cache', checkpoint_interval=1000, config_file=None, data_dir='./data', dataset='rte', dataset_path=None, ensemble_num=1, epsilon=1.0, examples_per_label=1, fix_dist=False, is_quantized=False, knn_T=None, knn_k=None, knn_model='bert-base-uncased', local_rank=0, local_world_size=1, lr=1e-05, mask_augment=False, mask_prob=0.15, mask_ratio=0.3, max_length=1024, max_percent_words=0.15, mode='attack', model='google/gemma-7b', model_dir='./checkpoints/rte/google/gemma-7b/icl_attack/icl_attack-seed-1-shot-8', model_id='0', model_type='icl_attack', norm='l2', num_epochs=20, num_examples=1000, num_iter=1, num_labels=2, num_template=-1, path='None', patience=10, pool_label_words='max', pool_templates='mean', precision='bfloat16', prompt_num=2, query_budget=-1, replace_ratio=0.1, retrieve_method='sbert', sampled_num=1, seed=1, shot=8, split='test', template_file='configs/templates_rte.yaml', tindex=0, train_epoch=30, train_size=0.95, val_size=0.05, verbalizer_file='configs/verbalizer_rte.yaml', weight_decay=0.01)
Length of anchor subsample 0
Length of icl examples 2
Finished loading model
ICL examples
{'label': 1, 'idx': 0, 'premise': 'dana reeve, the widow of the actor christopher reeve, has died of lung cancer at age 44, according to the christopher reeve foundation.', 'hypothesis': 'christopher reeve had an accident.', 'Premise_0': 'george herbert walker bush (born june 12, 1924) is the former 41st president of the united states of america. almost immediately upon his return from the war in december 1944, george bush married barbara pierce.', 'Hypothesis_0': "the name of george h.w. bush's wife is barbara.", 'Label_0': 'true', 'Premise_1': 'it rewrites the rules of global trade, established by the general agreement on tariffs and trade, or gatt, in 1947, and modified in multiple rounds of negotiations since then.', 'Hypothesis_1': 'gatt was formed in 1947.', 'Label_1': 'false', 'Premise_2': 'us military forces are evacuating u.s. citizens and citizens of 72 other countries from liberia at the request of the u.s.', 'Hypothesis_2': 'u.s. military evacuated u.s. citizens.', 'Label_2': 'true', 'Premise_3': "floods are one of europe's most widespread disasters. major flooding has occurred nearly every year somewhere on our continent during the last few decades.", 'Hypothesis_3': 'flooding in europe causes major economic losses.', 'Label_3': 'false', 'Premise_4': 'rock stars aerosmith are to hold a free concert in hawaii to placate angry fans who brought a legal case against them. the walk this way hitmakers cancelled a sold-out show in maui two years ago, leaving hundreds of fans out of pocket. they filed a class action case, which claimed the band had pulled out in favour of a bigger gig in chicago and a private show for car dealers in oahu. lawyers for the would-be concert-goers said aerosmith had now agreed to put on a new show, and would pay all expenses.', 'Hypothesis_4': 'aerosmith are a rock band.', 'Label_4': 'true', 'Premise_5': 'one reason for increased osteoporosis in developed countries is the sodium-potassium imbalance.', 'Hypothesis_5': 'dietary intake of potassium prevents osteoporosis.', 'Label_5': 'false', 'Premise_6': 'jerusalem, april 2 (xinhua) -- israel\'s new foreign minister avigdor lieberman was questioned by police on thursday over several criminal allegations, local news service ynet reported.  national fraud unit investigators questioned the deputy premier, who is suspected of bribery, money laundering, fraud and breach of trust, for over seven hours, and another round is in the cards, said the report.  "lieberman answered all of the questions he was asked, and will continue to do so in the future," his attorney yaron kostelitz was quoted as saying.', 'Hypothesis_6': 'avigdor lieberman is the foreign minister of israel.', 'Label_6': 'true', 'Premise_7': 'other friends were not surprised at his death. "i wasn\'t surprised," said george stranahan, a former owner of the woody creek tavern, a favourite haunt of thompson. "i never expected hunter to die in a hospital bed with tubes coming out of him." neighbours have said how his broken leg had prevented him from leaving his house as often as he had liked to. one neighbour and long-standing friend, mike cleverly, said thompson was clearly hobbled by the broken leg. "medically speaking, he\'s had a rotten year."', 'Hypothesis_7': 'the woody creek tavern is owned by george stranahan.', 'Label_7': 'false', 'Premise_8': 'witching hour passed and potter fans poured into bookshops around the world on saturday, snatching up copies of the latest instalment in the series that promises to be the fastest-selling book in history.', 'Hypothesis_8': 'potter fans rushed to tills in order to purchase the book.', 'Label_8': 'true', 'Premise_9': "alan mulally, boeing's head of the unit, said at the start of the strike that it may cause delivery delays that would give airbus sas an advantage in what is the strongest commercial aircraft market in five years.", 'Hypothesis_9': 'alan mulally is the owner of boeing.', 'Label_9': 'false', 'Premise_10': "to promote the simpsons movie that will be released july 26, 2007, over a dozen 7-elevens in the united states have been transformed into kwik-e-marts, the grocery store from the popular tv series. most of the other 7-eleven stores will also sell products with brands reminding of the simpsons, such as buzz cola, krustyo's cereal, squishees, and bart simpson's favourite comic book radioactive man, but not duff beer, homer's favourite drink.", 'Hypothesis_10': 'the simpsons is a show broadcast in america.', 'Label_10': 'true', 'Premise_11': 'he is like some great writers, from charles dickens to william faulkner to gabriel garcia marquez: the insistence on the value of the local leads to the universal.', 'Hypothesis_11': 'gabriel garcia marquez is a nobel prize winner.', 'Label_11': 'false', 'Premise_12': 'colin l. powell and laura bush, wife of gov. george w. bush, are to speak on the opening night in philadelphia, while the democrats have tentative plans to have president clinton and hillary rodham clinton address the delegates on the first night in los angeles.', 'Hypothesis_12': "the name of george w. bush's wife is laura.", 'Label_12': 'true', 'Premise_13': 'after insulting the un committee insinuating they were irrelavant, bush no sooner had approval from congress to use "force/war" if hussein did not permit unfettered access for inspections - and the war ships were moved into place on the gulf.', 'Hypothesis_13': 'hussein gives un inspectors unfettered access.', 'Label_13': 'false', 'Premise_14': 'while local cab drivers had compliments, not everyone appreciated the company. the chicago cubs decided to cancel their booking after hearing about the con, and j.j. hardy of the milwaukee brewers reported being kept up by fans on wednesday night. the brewers lost their game the following day. the convention closed with next year\'s date ―june 26-29 ―along with the announcement of a guest: disney animator floyd norman. the event\'s theme will be "it\'s a jungle out there!".', 'Hypothesis_14': 'j.j. hardy has a contract with the milwaukee brewers.', 'Label_14': 'true', 'Premise_15': 'for a western european country, the birth rate in finland is high.', 'Hypothesis_15': 'finland is the european country with the highest birth rate.', 'Label_15': 'false'}
{'label': 1, 'idx': 0, 'premise': 'dana reeve, the widow of the actor christopher reeve, has died of lung cancer at age 44, according to the christopher reeve foundation.', 'hypothesis': 'christopher reeve had an accident.', 'Premise_0': 'george herbert walker bush (born june 12, 1924) is the former 41st president of the united states of america. almost immediately upon his return from the war in december 1944, george bush married barbara pierce.', 'Hypothesis_0': "the name of george h.w. bush's wife is barbara.", 'Label_0': 'true', 'Premise_1': 'it rewrites the rules of global trade, established by the general agreement on tariffs and trade, or gatt, in 1947, and modified in multiple rounds of negotiations since then.', 'Hypothesis_1': 'gatt was formed in 1947.', 'Label_1': 'false', 'Premise_2': 'us military forces are evacuating u.s. citizens and citizens of 72 other countries from liberia at the request of the u.s.', 'Hypothesis_2': 'u.s. military evacuated u.s. citizens.', 'Label_2': 'true', 'Premise_3': "floods are one of europe's most widespread disasters. major flooding has occurred nearly every year somewhere on our continent during the last few decades.", 'Hypothesis_3': 'flooding in europe causes major economic losses.', 'Label_3': 'false', 'Premise_4': 'rock stars aerosmith are to hold a free concert in hawaii to placate angry fans who brought a legal case against them. the walk this way hitmakers cancelled a sold-out show in maui two years ago, leaving hundreds of fans out of pocket. they filed a class action case, which claimed the band had pulled out in favour of a bigger gig in chicago and a private show for car dealers in oahu. lawyers for the would-be concert-goers said aerosmith had now agreed to put on a new show, and would pay all expenses.', 'Hypothesis_4': 'aerosmith are a rock band.', 'Label_4': 'true', 'Premise_5': 'one reason for increased osteoporosis in developed countries is the sodium-potassium imbalance.', 'Hypothesis_5': 'dietary intake of potassium prevents osteoporosis.', 'Label_5': 'false', 'Premise_6': 'jerusalem, april 2 (xinhua) -- israel\'s new foreign minister avigdor lieberman was questioned by police on thursday over several criminal allegations, local news service ynet reported.  national fraud unit investigators questioned the deputy premier, who is suspected of bribery, money laundering, fraud and breach of trust, for over seven hours, and another round is in the cards, said the report.  "lieberman answered all of the questions he was asked, and will continue to do so in the future," his attorney yaron kostelitz was quoted as saying.', 'Hypothesis_6': 'avigdor lieberman is the foreign minister of israel.', 'Label_6': 'true', 'Premise_7': 'other friends were not surprised at his death. "i wasn\'t surprised," said george stranahan, a former owner of the woody creek tavern, a favourite haunt of thompson. "i never expected hunter to die in a hospital bed with tubes coming out of him." neighbours have said how his broken leg had prevented him from leaving his house as often as he had liked to. one neighbour and long-standing friend, mike cleverly, said thompson was clearly hobbled by the broken leg. "medically speaking, he\'s had a rotten year."', 'Hypothesis_7': 'the woody creek tavern is owned by george stranahan.', 'Label_7': 'false', 'Premise_8': 'witching hour passed and potter fans poured into bookshops around the world on saturday, snatching up copies of the latest instalment in the series that promises to be the fastest-selling book in history.', 'Hypothesis_8': 'potter fans rushed to tills in order to purchase the book.', 'Label_8': 'true', 'Premise_9': "alan mulally, boeing's head of the unit, said at the start of the strike that it may cause delivery delays that would give airbus sas an advantage in what is the strongest commercial aircraft market in five years.", 'Hypothesis_9': 'alan mulally is the owner of boeing.', 'Label_9': 'false', 'Premise_10': "to promote the simpsons movie that will be released july 26, 2007, over a dozen 7-elevens in the united states have been transformed into kwik-e-marts, the grocery store from the popular tv series. most of the other 7-eleven stores will also sell products with brands reminding of the simpsons, such as buzz cola, krustyo's cereal, squishees, and bart simpson's favourite comic book radioactive man, but not duff beer, homer's favourite drink.", 'Hypothesis_10': 'the simpsons is a show broadcast in america.', 'Label_10': 'true', 'Premise_11': 'he is like some great writers, from charles dickens to william faulkner to gabriel garcia marquez: the insistence on the value of the local leads to the universal.', 'Hypothesis_11': 'gabriel garcia marquez is a nobel prize winner.', 'Label_11': 'false', 'Premise_12': 'colin l. powell and laura bush, wife of gov. george w. bush, are to speak on the opening night in philadelphia, while the democrats have tentative plans to have president clinton and hillary rodham clinton address the delegates on the first night in los angeles.', 'Hypothesis_12': "the name of george w. bush's wife is laura.", 'Label_12': 'true', 'Premise_13': 'after insulting the un committee insinuating they were irrelavant, bush no sooner had approval from congress to use "force/war" if hussein did not permit unfettered access for inspections - and the war ships were moved into place on the gulf.', 'Hypothesis_13': 'hussein gives un inspectors unfettered access.', 'Label_13': 'false', 'Premise_14': 'while local cab drivers had compliments, not everyone appreciated the company. the chicago cubs decided to cancel their booking after hearing about the con, and j.j. hardy of the milwaukee brewers reported being kept up by fans on wednesday night. the brewers lost their game the following day. the convention closed with next year\'s date ―june 26-29 ―along with the announcement of a guest: disney animator floyd norman. the event\'s theme will be "it\'s a jungle out there!".', 'Hypothesis_14': 'j.j. hardy has a contract with the milwaukee brewers.', 'Label_14': 'true', 'Premise_15': 'for a western european country, the birth rate in finland is high.', 'Hypothesis_15': 'finland is the european country with the highest birth rate.', 'Label_15': 'false'}
['{}\n The question is: {}. True or False?\nThe Answer is: {}']
{0: ['true'], 1: ['false']}
./checkpoints/rte/google/gemma-7b/icl_attack/icl_attack-seed-1-shot-8/icl_attack_log.csv
<textattack.attacker.Attacker object at 0x7fd23b419f10>
Attack(
  (search_method): GreedyWordSwapWIR(
    (wir_method):  delete
  )
  (goal_function):  UntargetedClassification
  (transformation):  CompositeTransformation(
    (0): WordSwapRandomCharacterInsertion(
        (random_one):  True
      )
    (1): WordSwapRandomCharacterDeletion(
        (random_one):  True
      )
    (2): WordSwapNeighboringCharacterSwap(
        (random_one):  True
      )
    (3): WordSwapHomoglyphSwap
    (4): WordSwapEmbedding(
        (max_candidates):  5
        (embedding):  WordEmbedding
      )
    )
  (constraints): 
    (0): IclUniversalSentenceEncoder(
        (metric):  angular
        (threshold):  0.8
        (window_size):  inf
        (skip_text_shorter_than_window):  False
        (compare_against_original):  True
      )
    (1): RepeatModification
    (2): StopwordModification
    (3): InstructionModification(
        (columns_to_ignore):  ['sentence', 'label_', 'premise', 'hypothesis']
      )
  (is_black_box):  True
) 


+-------------------------------+--------+
| Attack Results                |        |
+-------------------------------+--------+
| Number of successful attacks: | 95     |
| Number of failed attacks:     | 120    |
| Number of skipped attacks:    | 62     |
| Original accuracy:            | 77.62  |
| Accuracy under attack:        | 43.32  |
| Attack success rate:          | 44.19  |
| Average perturbed word %:     | 1.2    |
| Average num. words per input: | 928.02 |
| Avg num queries:              | 644.19 |
| Adv confidence:               | 0.56   |
| Average Original Perplexity:  | 39.56  |
| Average Attack Perplexity:    | 40.23  |
| Average Attack USE Score:     | 0.99   |
+-------------------------------+--------+
Attack time: 25207.02801799774
Attack time: 25207.02801799774
