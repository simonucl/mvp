1
Namespace(adv_augment=0, alpha=None, attack_name='irrelevant_sample', batch_size=4, beta=1.0, checkpoint_interval=1000, config_file=None, data_dir='./data', dataset='rte', dataset_path=None, ensemble_num=1, epsilon=1.0, examples_per_label=1, fix_dist=False, is_quantized=True, knn_T=None, knn_k=None, knn_model='bert-base-uncased', local_rank=0, local_world_size=1, lr=1e-05, mask_augment=False, mask_prob=0.15, mask_ratio=0.3, max_length=1024, max_percent_words=0.5, mode='attack', model='mistralai/Mistral-7B-Instruct-v0.1', model_dir='./checkpoints/rte/mistralai/Mistral-7B-Instruct-v0.1/irrelevant_sample/icl-seed-1-shot-8', model_id='0', model_type='icl', norm='l2', num_epochs=20, num_examples=1000, num_iter=1, num_labels=2, num_template=-1, path='None', patience=10, pool_label_words='max', pool_templates='mean', precision='int4', prompt_num=2, query_budget=-1, replace_ratio=0.1, retrieve_method='sbert', sampled_num=1, save_icl_examples_path=None, seed=1, shot=8, split='test', template_file='configs/templates_rte.yaml', tindex=0, train_epoch=30, train_size=0.95, val_size=0.05, verbalizer_file='configs/verbalizer_rte.yaml', weight_decay=0.01)
mistralai/Mistral-7B-Instruct-v0.1
Model Directory: ./checkpoints/rte/mistralai/Mistral-7B-Instruct-v0.1/irrelevant_sample/icl-seed-1-shot-8
1 Physical GPUs, 1 Logical GPUs
Namespace(adv_augment=0, alpha=None, attack_name='irrelevant_sample', batch_size=4, beta=1.0, cache_dir='./checkpoints/rte/mistralai/Mistral-7B-Instruct-v0.1/irrelevant_sample/icl-seed-1-shot-8/cache', checkpoint_interval=1000, config_file=None, data_dir='./data', dataset='rte', dataset_path=None, ensemble_num=1, epsilon=1.0, examples_per_label=1, fix_dist=False, is_quantized=True, knn_T=None, knn_k=None, knn_model='bert-base-uncased', local_rank=0, local_world_size=1, lr=1e-05, mask_augment=False, mask_prob=0.15, mask_ratio=0.3, max_length=1024, max_percent_words=0.5, mode='attack', model='mistralai/Mistral-7B-Instruct-v0.1', model_dir='./checkpoints/rte/mistralai/Mistral-7B-Instruct-v0.1/irrelevant_sample/icl-seed-1-shot-8', model_id='0', model_type='icl', norm='l2', num_epochs=20, num_examples=1000, num_iter=1, num_labels=2, num_template=-1, path='None', patience=10, pool_label_words='max', pool_templates='mean', precision='int4', prompt_num=2, query_budget=-1, replace_ratio=0.1, retrieve_method='sbert', sampled_num=1, save_icl_examples_path=None, seed=1, shot=8, split='test', template_file='configs/templates_rte.yaml', tindex=0, train_epoch=30, train_size=0.95, val_size=0.05, verbalizer_file='configs/verbalizer_rte.yaml', weight_decay=0.01)
Finished loading ood dataset
{'label': 0, 'idx': 1876, 'premise': "the commission's order on the proposed hydroelectric development shall describe the energy facility siting council's recommendations on the need for the power.", 'hypothesis': 'a hydroelectric project is proposed or is under construction.'}
Finished replacing ood dataset
{'label': 0, 'idx': 1876, 'premise': "the commission's order on the proposed hydroelectric development shall describe the energy facility siting council's recommendations on the need for the power.", 'hypothesis': 'a hydroelectric project is proposed or is under construction.'}
Length of anchor subsample 0
Length of icl examples 2
Finished loading model
ICL examples
{'label': 1, 'idx': 0, 'premise': 'dana reeve, the widow of the actor christopher reeve, has died of lung cancer at age 44, according to the christopher reeve foundation.', 'hypothesis': 'christopher reeve had an accident.', 'Premise_0': 'Azerbaijan violated the Karabakh ceasefire thirty times yesterday and last night, firing 300 small arms and sniper rounds, this according to the NKR Ministry of Defense.\n', 'Hypothesis_0': '“It is with great gratitude and pleasure to welcome our little girl Flora to the world,” Smart wrote in an Instagram post of the happy family in the hospital on Saturday. “What a blessed way to bring in 2017 Amen and Thank You God for this special new life!!”\n', 'Label_0': 'true', 'Premise_1': 'it rewrites the rules of global trade, established by the general agreement on tariffs and trade, or gatt, in 1947, and modified in multiple rounds of negotiations since then.', 'Hypothesis_1': 'gatt was formed in 1947.', 'Label_1': 'false', 'Premise_2': 'Police said they investigated but the results don’t match what Lam said in his report.\n', 'Hypothesis_2': "Meeks made headlines in 2014 after his mugshot, posted on the Stockton Police Department's Facebook page after he was arrested on federal weapons charges, went viral.\n", 'Label_2': 'true', 'Premise_3': "floods are one of europe's most widespread disasters. major flooding has occurred nearly every year somewhere on our continent during the last few decades.", 'Hypothesis_3': 'flooding in europe causes major economic losses.', 'Label_3': 'false', 'Premise_4': "I'm looking forward to speaking at the Kathleen Gorman Memorial Talk this Mon 9th of October @ 7.30pm,Timahoe Community Centre,Co Laois pic.twitter.com/NDgvTSp0Yb October 5, 2017\n", 'Hypothesis_4': 'Mark Porter was a supervisor at the site to repair a crane being used to build the Winters Road Bridge over Putah Creek that connects Yolo and Solano counties.\n', 'Label_4': 'true', 'Premise_5': 'one reason for increased osteoporosis in developed countries is the sodium-potassium imbalance.', 'Hypothesis_5': 'dietary intake of potassium prevents osteoporosis.', 'Label_5': 'false', 'Premise_6': 'Meath West saw a Yes vote of 62.9%, while Meath East voted by 69.2% to repeal.\n', 'Hypothesis_6': 'The police are still investigating the incident with great skepticism.\n', 'Label_6': 'true', 'Premise_7': 'other friends were not surprised at his death. "i wasn\'t surprised," said george stranahan, a former owner of the woody creek tavern, a favourite haunt of thompson. "i never expected hunter to die in a hospital bed with tubes coming out of him." neighbours have said how his broken leg had prevented him from leaving his house as often as he had liked to. one neighbour and long-standing friend, mike cleverly, said thompson was clearly hobbled by the broken leg. "medically speaking, he\'s had a rotten year."', 'Hypothesis_7': 'the woody creek tavern is owned by george stranahan.', 'Label_7': 'false', 'Premise_8': 'Breaking News\n', 'Hypothesis_8': 'Herb Kelleher created the first budget airline, which found great success by simplifying everything from the destinations to the (lack of) snacks served on board.\n', 'Label_8': 'true', 'Premise_9': "Hudson declared for the NBA draft in late March, but didn't hire an agent and left open the possibility of staying in school. Hudson wasn't invited to the NBA Combine and was told he wouldn't get drafted.\n", 'Hypothesis_9': 'This is your chance to enter to win a $500 Gift Card and help you give your home that Spring Impression!\n', 'Label_9': 'false', 'Premise_10': 'The club offered 3-year contract with annual salary of EUR 900,000 to Citro called “Messi of Fishano”. 29-year-old forward can also be signed by “Benevento” close to Serie A. But the player is more positive towards attractive offer of “Qarabag” club.\n', 'Hypothesis_10': 'Ashenfelter said there were no disruptions to activities inside the courthouse.\n', 'Label_10': 'true', 'Premise_11': 'he is like some great writers, from charles dickens to william faulkner to gabriel garcia marquez: the insistence on the value of the local leads to the universal.', 'Hypothesis_11': 'gabriel garcia marquez is a nobel prize winner.', 'Label_11': 'false', 'Premise_12': 'See the full list of winners here.\n', 'Hypothesis_12': "NORRISTOWN, Pa. - As Bill Cosby awaits a verdict in his sexual assault case in Pennsylvania, the comedian's civil lawyers are fighting civil lawsuits against him by 10 women around the country.\n", 'Label_12': 'true', 'Premise_13': 'after insulting the un committee insinuating they were irrelavant, bush no sooner had approval from congress to use "force/war" if hussein did not permit unfettered access for inspections - and the war ships were moved into place on the gulf.', 'Hypothesis_13': 'hussein gives un inspectors unfettered access.', 'Label_13': 'false', 'Premise_14': 'San Bernardino-bound Metrolink trains originating at Union Station were held there for more than two hours. In the meantime, some lines began anew at the El Monte station.\n', 'Hypothesis_14': "Syria's 'catman' gives dozens of kittens in Aleppo a home 0:33\n", 'Label_14': 'true', 'Premise_15': 'for a western european country, the birth rate in finland is high.', 'Hypothesis_15': 'finland is the european country with the highest birth rate.', 'Label_15': 'false'}
{'label': 1, 'idx': 0, 'premise': 'dana reeve, the widow of the actor christopher reeve, has died of lung cancer at age 44, according to the christopher reeve foundation.', 'hypothesis': 'christopher reeve had an accident.', 'Premise_0': 'Azerbaijan violated the Karabakh ceasefire thirty times yesterday and last night, firing 300 small arms and sniper rounds, this according to the NKR Ministry of Defense.\n', 'Hypothesis_0': '“It is with great gratitude and pleasure to welcome our little girl Flora to the world,” Smart wrote in an Instagram post of the happy family in the hospital on Saturday. “What a blessed way to bring in 2017 Amen and Thank You God for this special new life!!”\n', 'Label_0': 'true', 'Premise_1': 'it rewrites the rules of global trade, established by the general agreement on tariffs and trade, or gatt, in 1947, and modified in multiple rounds of negotiations since then.', 'Hypothesis_1': 'gatt was formed in 1947.', 'Label_1': 'false', 'Premise_2': 'Police said they investigated but the results don’t match what Lam said in his report.\n', 'Hypothesis_2': "Meeks made headlines in 2014 after his mugshot, posted on the Stockton Police Department's Facebook page after he was arrested on federal weapons charges, went viral.\n", 'Label_2': 'true', 'Premise_3': "floods are one of europe's most widespread disasters. major flooding has occurred nearly every year somewhere on our continent during the last few decades.", 'Hypothesis_3': 'flooding in europe causes major economic losses.', 'Label_3': 'false', 'Premise_4': "I'm looking forward to speaking at the Kathleen Gorman Memorial Talk this Mon 9th of October @ 7.30pm,Timahoe Community Centre,Co Laois pic.twitter.com/NDgvTSp0Yb October 5, 2017\n", 'Hypothesis_4': 'Mark Porter was a supervisor at the site to repair a crane being used to build the Winters Road Bridge over Putah Creek that connects Yolo and Solano counties.\n', 'Label_4': 'true', 'Premise_5': 'one reason for increased osteoporosis in developed countries is the sodium-potassium imbalance.', 'Hypothesis_5': 'dietary intake of potassium prevents osteoporosis.', 'Label_5': 'false', 'Premise_6': 'Meath West saw a Yes vote of 62.9%, while Meath East voted by 69.2% to repeal.\n', 'Hypothesis_6': 'The police are still investigating the incident with great skepticism.\n', 'Label_6': 'true', 'Premise_7': 'other friends were not surprised at his death. "i wasn\'t surprised," said george stranahan, a former owner of the woody creek tavern, a favourite haunt of thompson. "i never expected hunter to die in a hospital bed with tubes coming out of him." neighbours have said how his broken leg had prevented him from leaving his house as often as he had liked to. one neighbour and long-standing friend, mike cleverly, said thompson was clearly hobbled by the broken leg. "medically speaking, he\'s had a rotten year."', 'Hypothesis_7': 'the woody creek tavern is owned by george stranahan.', 'Label_7': 'false', 'Premise_8': 'Breaking News\n', 'Hypothesis_8': 'Herb Kelleher created the first budget airline, which found great success by simplifying everything from the destinations to the (lack of) snacks served on board.\n', 'Label_8': 'true', 'Premise_9': "Hudson declared for the NBA draft in late March, but didn't hire an agent and left open the possibility of staying in school. Hudson wasn't invited to the NBA Combine and was told he wouldn't get drafted.\n", 'Hypothesis_9': 'This is your chance to enter to win a $500 Gift Card and help you give your home that Spring Impression!\n', 'Label_9': 'false', 'Premise_10': 'The club offered 3-year contract with annual salary of EUR 900,000 to Citro called “Messi of Fishano”. 29-year-old forward can also be signed by “Benevento” close to Serie A. But the player is more positive towards attractive offer of “Qarabag” club.\n', 'Hypothesis_10': 'Ashenfelter said there were no disruptions to activities inside the courthouse.\n', 'Label_10': 'true', 'Premise_11': 'he is like some great writers, from charles dickens to william faulkner to gabriel garcia marquez: the insistence on the value of the local leads to the universal.', 'Hypothesis_11': 'gabriel garcia marquez is a nobel prize winner.', 'Label_11': 'false', 'Premise_12': 'See the full list of winners here.\n', 'Hypothesis_12': "NORRISTOWN, Pa. - As Bill Cosby awaits a verdict in his sexual assault case in Pennsylvania, the comedian's civil lawyers are fighting civil lawsuits against him by 10 women around the country.\n", 'Label_12': 'true', 'Premise_13': 'after insulting the un committee insinuating they were irrelavant, bush no sooner had approval from congress to use "force/war" if hussein did not permit unfettered access for inspections - and the war ships were moved into place on the gulf.', 'Hypothesis_13': 'hussein gives un inspectors unfettered access.', 'Label_13': 'false', 'Premise_14': 'San Bernardino-bound Metrolink trains originating at Union Station were held there for more than two hours. In the meantime, some lines began anew at the El Monte station.\n', 'Hypothesis_14': "Syria's 'catman' gives dozens of kittens in Aleppo a home 0:33\n", 'Label_14': 'true', 'Premise_15': 'for a western european country, the birth rate in finland is high.', 'Hypothesis_15': 'finland is the european country with the highest birth rate.', 'Label_15': 'false'}
['{}\n The question is: {}. True or False?\nThe Answer is: {}']
{0: ['true'], 1: ['false']}
./checkpoints/rte/mistralai/Mistral-7B-Instruct-v0.1/irrelevant_sample/icl-seed-1-shot-8/irrelevant_sample_log.csv
<textattack.attacker.Attacker object at 0x7fd2158954f0>
Attack(
  (search_method): GreedyWordSwapWIR(
    (wir_method):  delete
  )
  (goal_function):  UntargetedClassification
  (transformation):  WordSwapEmbedding(
    (max_candidates):  50
    (embedding):  WordEmbedding
  )
  (constraints): 
    (0): MaxWordsPerturbed(
        (max_percent):  0.5
        (compare_against_original):  True
      )
    (1): WordEmbeddingDistance(
        (embedding):  WordEmbedding
        (min_cos_sim):  0.6
        (cased):  False
        (include_unknown_words):  True
        (compare_against_original):  True
      )
    (2): PartOfSpeech(
        (tagger_type):  nltk
        (tagset):  universal
        (allow_verb_noun_swap):  True
        (compare_against_original):  True
      )
    (3): UniversalSentenceEncoder(
        (metric):  angular
        (threshold):  0.840845057
        (window_size):  15
        (skip_text_shorter_than_window):  True
        (compare_against_original):  False
      )
    (4): RepeatModification
    (5): StopwordModification
    (6): InstructionModification(
        (columns_to_ignore):  ['example_', 'label_']
      )
    (7): InputColumnModification(
        (matching_column_labels):  ['premise', 'hypothesis']
        (columns_to_ignore):  {'premise'}
      )
    (8): InputColumnModification(
        (matching_column_labels):  ['question', 'sentence']
        (columns_to_ignore):  {'question'}
      )
  (is_black_box):  True
) 


+-------------------------------+--------+
| Attack Results                |        |
+-------------------------------+--------+
| Number of successful attacks: | 0      |
| Number of failed attacks:     | 207    |
| Number of skipped attacks:    | 70     |
| Original accuracy:            | 74.73  |
| Accuracy under attack:        | 74.73  |
| Attack success rate:          | 0.0    |
| Average perturbed word %:     | nan    |
| Average num. words per input: | 770.02 |
| Avg num queries:              | 1.0    |
| Adv confidence:               | nan    |
+-------------------------------+--------+
Attack time: 1109.097974538803
Attack time: 1109.097974538803
